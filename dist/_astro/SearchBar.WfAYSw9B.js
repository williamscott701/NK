import{j as r}from"./jsx-runtime.C9eWo9jt.js";import{r as o}from"./index.B52nOzfP.js";function E({placeholder:v="Search Bible verses, concepts, or topics...",booksData:m,conceptsData:h,storiesData:x}){const[i,w]=o.useState(""),[y,p]=o.useState(!1),[n,c]=o.useState([]),[b,d]=o.useState(!1);o.useEffect(()=>{console.log("SearchBar mounted with props"),console.log("Books data:",m),console.log("Concepts data:",h),console.log("Stories data:",x)},[m,h,x]);const g=s=>{if(!s.trim()){c([]),d(!1);return}const a=[],l=s.toLowerCase();try{m.books.forEach(e=>{e.name.toLowerCase().includes(l)&&a.push({type:"book",title:e.name,description:e.description,url:`/book/${e.id}`,relevance:10}),e.author&&e.author.toLowerCase().includes(l)&&a.push({type:"book",title:`${e.name} - by ${e.author}`,description:e.description,url:`/book/${e.id}`,relevance:9}),e.themes&&e.themes.some(t=>t.toLowerCase().includes(l))&&a.push({type:"book",title:`${e.name} - Themes`,description:`Contains themes: ${e.themes.join(", ")}`,url:`/book/${e.id}`,relevance:8}),e.chaptersContent&&e.chaptersContent.forEach(t=>{(t.title&&t.title.toLowerCase().includes(l)||t.summary&&t.summary.toLowerCase().includes(l)||t.themes&&t.themes.some(f=>f.toLowerCase().includes(l)))&&a.push({type:"chapter",title:`${e.name} - Chapter ${t.number}`,description:t.title||t.summary||"",url:`/book/${e.id}/chapter/${t.number}`,relevance:7})})}),h.concepts.forEach(e=>{(e.title&&e.title.toLowerCase().includes(l)||e.description&&e.description.toLowerCase().includes(l))&&a.push({type:"concept",title:e.title,description:e.description,url:`/concept/${e.id}`,relevance:9})}),x.stories.forEach(e=>{(e.title&&e.title.toLowerCase().includes(l)||e.summary&&e.summary.toLowerCase().includes(l)||e.themes&&e.themes.some(t=>t.toLowerCase().includes(l)))&&a.push({type:"story",title:e.title,description:e.summary,url:`/story/${e.id}`,relevance:8})});const u=a.filter((e,t,f)=>t===f.findIndex(S=>S.url===e.url));u.sort((e,t)=>t.relevance-e.relevance),c(u.slice(0,10)),d(!0)}catch(u){console.error("Search error:",u),c([])}};o.useEffect(()=>{i.trim()?g(i):(c([]),d(!1))},[i]);const j=s=>{s.preventDefault(),i.trim()&&g(i)},N=s=>{switch(s){case"book":return"üìñ";case"chapter":return"üìÑ";case"concept":return"üí°";case"story":return"üìö";default:return"üîç"}},C=s=>{switch(s){case"book":return"bg-blue-100 text-blue-800 border-blue-200";case"chapter":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"concept":return"bg-amber-100 text-amber-800 border-amber-200";case"story":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"w-full max-w-4xl mx-auto relative",children:[r.jsx("form",{onSubmit:j,className:"relative",children:r.jsxs("div",{className:`relative transition-all duration-300 ${y?"transform scale-105":""}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-bible-gold/20 to-bible-blue/20 rounded-2xl blur-xl"}),r.jsx("div",{className:"relative bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl shadow-2xl overflow-hidden",children:r.jsxs("div",{className:"flex items-center p-6",children:[r.jsx("svg",{className:"w-8 h-8 text-bible-blue mr-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),r.jsx("input",{type:"text",value:i,onChange:s=>w(s.target.value),onFocus:()=>p(!0),onBlur:()=>{p(!1),setTimeout(()=>d(!1),200)},placeholder:v,className:"flex-1 text-xl text-gray-800 placeholder-gray-500 bg-transparent outline-none"}),r.jsx("button",{type:"submit",className:"ml-4 px-8 py-3 bg-gradient-to-r from-bible-blue to-blue-600 text-white font-semibold rounded-xl hover:from-bible-blue/90 hover:to-blue-600/90 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Search"})]})})]})}),b&&n.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-4 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-96 overflow-y-auto z-50",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"text-sm text-gray-500 mb-3 px-2",children:["Found ",n.length," results"]}),n.map((s,a)=>r.jsx("a",{href:s.url,className:"block p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:N(s.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:s.title}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${C(s.type)}`,children:s.type})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description})]})]})},a))]})}),b&&i.trim()&&n.length===0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-4 bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 z-50",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-2",children:"üîç"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"No results found"}),r.jsx("p",{className:"text-sm",children:"Try searching for different keywords or browse our categories"})]})})]})}export{E as default};
